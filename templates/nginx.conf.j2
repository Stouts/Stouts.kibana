# This file was generated by Ae for {{ansible_fqdn}}
# Do NOT modify this file by hand!

server {
    listen            {{kibana_nginx_port}};
    server_name       {{kibana_nginx_servername}};
    client_max_body_size 8m;
    ignore_invalid_headers off;

    {% if kibana_nginx_auth %}
    auth_basic "{{kibana_nginx_auth}}";
    auth_basic_user_file {{kibana_home}}/.htpasswd;
    {% endif %}

    location / {
        proxy_pass http://{{kibana_server_host}}:{{kibana_server_port}};
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_set_header Host $http_host;
    }

    error_log         /var/log/kibana-nginx-errors.log;
    access_log        /var/log/kibana-nginx-access.log;

}
